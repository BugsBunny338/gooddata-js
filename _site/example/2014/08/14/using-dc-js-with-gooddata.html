<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>GoodData Javascript SDK</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://developer.gooddata.com/favicon.ico" rel="shortcut icon">
    <!-- Le styles -->
    <link href="http://localhost:4000/css/bootstrap.css" rel="stylesheet">
    <link href="http://localhost:4000/css/syntax.css" rel="stylesheet">
    <link href="http://localhost:4000/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="http://localhost:4000/css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="http://localhost:4000/css/highlight-default.min.css">
	<script src="http://localhost:4000/js/highlight.min.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>

<style>
body {
    padding-top: 20px;
    padding-bottom: 40px;
    background: url(http://sdk.gooddata.com/gooddata-js/images/background.png) left top no-repeat;
    background-size: 111px 245px;

  }

a.topics {margin-top: 7px; font-size: 16px;}

  /* Custom container */
  .container-narrow {
    margin: 45px auto;
    max-width: 700px;
  }
  .container-narrow > hr {
    margin: 45px 0;
  }

  /* Main marketing message and sign up button */
  .jumbotron {
    padding: 70px 0;
    text-align: center;
  }
  .jumbotron h1 {
    font-size: 48px;
    line-height: 1;
  }
  .jumbotron .btn {
    font-size: 21px;
    padding: 14px 24px;
  }

  /* Supporting marketing content */
  .marketing {
    margin: 60px 0;
  }
  .marketing p + h4 {
    margin-top: 28px;
  }

  img.centered {
    margin: 30px auto;
    display: block;
/*        border: 1px solid red;*/
  }


</style>

</head>
  <body>
    <div>
        <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <div style="margin-left: 100px;">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="brand" href="http://localhost:4000">
                <img src="http://localhost:4000/images/header-logo.png" alt="GoodData JS SDK" width="24" height="24" style="margin-bottom: 5px;" />
            GoodData<span style="color: #F0E040;">JS
            </a>
            <div class="nav-collapse collapse container">
                <ul class="nav">
                    
                    
                    <li>
                        <a href="http://localhost:4000/">Home</a>
                    </li>
                    
                    <li>
                        <a href="http://localhost:4000//getting-started">Get Started</a>
                    </li>
                    
                    <li>
                        <a href="http://localhost:4000//build-visualization">Build Visualization</a>
                    </li>
                    
                    <li>
                        <a href="http://localhost:4000//api">API</a>
                    </li>
                    
                    <li>
                        <a href="https://developer.gooddata.com/forum" target="_blank">Forum</a>
                    </li>
                </ul>
            </div>
            </div>
        </div>
        </div>
      <div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div style="margin-left: 100px;">
      <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="brand" href="http://localhost:4000">
          <img src="http://localhost:4000/images/header-logo.png" alt="GoodData Labs" width="24" height="24">
      GoodData<span style="color: #F0E040;">JS
</a>
      <div class="nav-collapse collapse container">
        <ul class="nav">
          <li class="">
            <a href="http://localhost:4000/">Home</a>
          </li>
          <li class="">
            <a href="http://localhost:4000/getting-started">Get Started</a>
          </li>
          <li class="">
            <a href="http://localhost:4000/build-visualization">Build Visualization</a>
          </li>
          <li class="">
            <a href="http://localhost:4000/api">API</a>
          </li>
		<li class="">
            <a href="https://developer.gooddata.com/forum" target="_blank">Forum</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<div class="container-narrow" style="margin-top: 40px;">
  <h2 class="title">Dynamic dc.js Visualization</h2>
  <p>Talking about visualization frameworks and libraries the <a href="http://dc-js.github.io/dc.js/">dc.js</a> together with <a href="https://github.com/square/crossfilter/wiki/API-Reference">Crossfilter</a> is great combo on the top of D3.js framework. There is a solid amount of examples around the internet so that you can start playing around immediately.</p>

<p>We took the example from the dc.js homepage which looks pretty cool and is <a href="http://dc-js.github.io/dc.js/docs/stock.html">greatly and fully described</a> and try to bring it to the next level. What we did? The original example is based on static CSV file. What is really cool? You can quite easily connect it to the GoodData Platform, get the data from your Project and use the visualization embedded to your dashboard. This is what we called <strong>Visualization Extensibility</strong>.</p>

<p>So let’s say we have a GoodData Project with Nasdaq data in it. See the example report below:</p>

<p><img src="http://localhost:4000/images/posts/source-report.png" alt="Source Report" width="600px" /></p>

<p>The potential is huge! If you miss some visualization, just build it and embed it directly to the GoodData Project!</p>

<p><img src="http://localhost:4000/images/posts/dc-js-example.png" alt="Dynamic Visualizations" /></p>

<p>The full script is in the example folder of the <a href="https://github.com/gooddata/gooddata-js">Visualization SDK library</a>.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ol>
  <li>Downloaded <a href="http://dc-js.github.io/dc.js/">dc.js</a> &amp; <a href="https://github.com/square/crossfilter/wiki/API-Reference">Crossfilter</a></li>
  <li>Have the data in the GoodData Project that you can visualize (you can build example project using this script)</li>
</ol>

<h2 id="integration">Integration</h2>

<p>The main change is in the beggining of the script, you basically specify which metrics are being extracted from the GoodData:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">projectId</span> <span class="o">=</span> <span class="s1">&#39;project-id&#39;</span><span class="p">,</span>
    <span class="nx">user</span> <span class="o">=</span> <span class="s1">&#39;username@company.com&#39;</span><span class="p">,</span>
	<span class="nx">passwd</span> <span class="o">=</span> <span class="s1">&#39;password&#39;</span><span class="p">;</span>

<span class="c1">// Report elements identifiers from which we execute a GD report</span>
<span class="kd">var</span> <span class="nx">open</span> <span class="o">=</span> <span class="s1">&#39;ak6IS471fqU4&#39;</span><span class="p">,</span>
	<span class="nx">high</span> <span class="o">=</span> <span class="s1">&#39;an3ISF1EiuFv&#39;</span><span class="p">,</span>
	<span class="nx">low</span> <span class="o">=</span> <span class="s1">&#39;apiISRdbfmS7&#39;</span><span class="p">,</span>
	<span class="nx">close</span> <span class="o">=</span> <span class="s1">&#39;adCISUDJfpJW&#39;</span><span class="p">,</span>
    <span class="nx">volume</span> <span class="o">=</span> <span class="s1">&#39;adCISXzgiy3t&#39;</span><span class="p">,</span>
    <span class="nx">date</span> <span class="o">=</span> <span class="s1">&#39;date.date.mmddyyyy&#39;</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="p">[</span><span class="nx">date</span><span class="p">,</span> <span class="nx">open</span><span class="p">,</span> <span class="nx">high</span><span class="p">,</span> <span class="nx">low</span><span class="p">,</span> <span class="nx">close</span><span class="p">,</span> <span class="nx">volume</span><span class="p">];</span></code></pre></div>

<p>Remember that order you specify in the elements array is the same that the elements will be exported from the GoodData.</p>

<p>Let’s download the data now. It is the same as for our othe examples. We need to do a little work with the output so that it fits the Crossfilter library.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">gooddata</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="nx">passwd</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.login-loader&#39;</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;&lt;div class=&quot;loading&quot; style=&quot;text-align: center; margin: 30px;&quot;&gt;Loading data...&lt;/div&gt;&#39;</span><span class="p">);</span>

    <span class="c1">// Ask for data for the given metric and attributes from the GoodSales project</span>
    <span class="nx">gooddata</span><span class="p">.</span><span class="nx">execution</span><span class="p">.</span><span class="nx">getData</span><span class="p">(</span><span class="nx">projectId</span><span class="p">,</span> <span class="nx">elements</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">dataResult</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Yay, data arrived</span>

        <span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="nx">dataResult</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">h</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>
                <span class="p">}),</span>
		<span class="nx">data</span> <span class="o">=</span> <span class="p">[];</span>

		<span class="c1">//Object -&gt; Array so that dc.js can consume it</span>
		<span class="nx">dataResult</span><span class="p">.</span><span class="nx">rawData</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">rv</span> <span class="o">=</span> <span class="p">{};</span>
					<span class="k">for</span>	<span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span>
					<span class="nx">rv</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
					<span class="nx">data</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">rv</span><span class="p">);</span>
					<span class="p">});</span>

		<span class="c1">// Remove loading labels</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.loading&#39;</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>

		<span class="kd">var</span> <span class="nx">dateFormat</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">time</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;%m/%d/%Y&quot;</span><span class="p">);</span>
		<span class="kd">var</span> <span class="nx">numberFormat</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.2f&quot;</span><span class="p">);</span>

		<span class="nx">data</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    		<span class="nx">d</span><span class="p">.</span><span class="nx">dd</span> <span class="o">=</span> <span class="nx">dateFormat</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    		<span class="nx">d</span><span class="p">.</span><span class="nx">month</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">time</span><span class="p">.</span><span class="nx">month</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">dd</span><span class="p">);</span> <span class="c1">// pre-calculate month for better performance</span>
    		<span class="nx">d</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="o">+</span><span class="nx">d</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="c1">// coerce to number</span>
    		<span class="nx">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">+</span><span class="nx">d</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    		<span class="p">});</span></code></pre></div>

<p>The rest of the script is basically the same as in the original example so that you can read the details. Only change is the name on keys in the objects because the Javascript SDK returns you numeric keys so the names are different.</p>

<p><a href="https://github.com/gooddata/gooddata-js/tree/develop/examples/dc-js">Download the full example</a> to start playing around! You can also find it directly in your repository (<em>example</em> folder).</p>



  <div class="section-nav">
  <div class="left align-right">
    
      <span class="prev disabled">Back</span>
    
  </div>
  <div class="right align-left">
    
      <a href="http://localhost:4000/example/2014/08/13/chord-chart-to-analyze-sales.html" class="next">
        Next
      </a>
    
  </div>
  <div class="clear"></div>
</div>

</div>


      <hr>

<div class="footer" style="text-align: center;">
<p>&copy; GoodData 2014</p>
      </div>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
     <script src="https://developer.gooddata.com/themes/site_themes/developer2012/js/jquery.js?v=1"></script>
    <script src="http://localhost:4000/js/bootstrap.min.js"></script>
    <script type="text/javascript">

                     var _gaq = _gaq || [];
                     _gaq.push(['_setAccount', 'UA-3766725-7']);
                     _gaq.push(['_trackPageview']);

                    (function() {
                      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                       })();

    </script>
  </body>
</html>
