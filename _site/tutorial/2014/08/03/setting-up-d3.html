<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>GoodData Javascript SDK</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://developer.gooddata.com/favicon.ico" rel="shortcut icon">
    <!-- Le styles -->
    <link href="http://localhost:4000/css/bootstrap.css" rel="stylesheet">
    <link href="http://localhost:4000/css/syntax.css" rel="stylesheet">
    <link href="http://localhost:4000/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="http://localhost:4000/css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="http://localhost:4000/css/highlight-default.min.css">
	<script src="http://localhost:4000/js/highlight.min.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>

<style>
body {
    padding-top: 20px;
    padding-bottom: 40px;
    background: url(http://sdk.gooddata.com/gooddata-js/images/background.png) left top no-repeat;
    background-size: 111px 245px;

  }

a.topics {margin-top: 7px; font-size: 16px;}

  /* Custom container */
  .container-narrow {
    margin: 45px auto;
    max-width: 700px;
  }
  .container-narrow > hr {
    margin: 45px 0;
  }

  /* Main marketing message and sign up button */
  .jumbotron {
    padding: 70px 0;
    text-align: center;
  }
  .jumbotron h1 {
    font-size: 48px;
    line-height: 1;
  }
  .jumbotron .btn {
    font-size: 21px;
    padding: 14px 24px;
  }

  /* Supporting marketing content */
  .marketing {
    margin: 60px 0;
  }
  .marketing p + h4 {
    margin-top: 28px;
  }

  img.centered {
    margin: 30px auto;
    display: block;
/*        border: 1px solid red;*/
  }


</style>

</head>
  <body>
    <div>
        <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <div style="margin-left: 100px;">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="brand" href="http://localhost:4000">
                <img src="http://localhost:4000/images/header-logo.png" alt="GoodData JS SDK" width="24" height="24" style="margin-bottom: 5px;" />
            GoodData<span style="color: #F0E040;">JS
            </a>
            <div class="nav-collapse collapse container">
                <ul class="nav">
                    
                    
                    <li>
                        <a href="http://localhost:4000/">Home</a>
                    </li>
                    
                    <li>
                        <a href="http://localhost:4000//getting-started">Get Started</a>
                    </li>
                    
                    <li>
                        <a href="http://localhost:4000//build-visualization">Build Visualization</a>
                    </li>
                    
                    <li>
                        <a href="http://localhost:4000//api">API</a>
                    </li>
                    
                    <li>
                        <a href="https://developer.gooddata.com/forum" target="_blank">Forum</a>
                    </li>
                </ul>
            </div>
            </div>
        </div>
        </div>
      <div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div style="margin-left: 100px;">
      <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="brand" href="http://localhost:4000">
          <img src="http://localhost:4000/images/header-logo.png" alt="GoodData Labs" width="24" height="24">
      GoodData<span style="color: #F0E040;">JS
</a>
      <div class="nav-collapse collapse container">
        <ul class="nav">
          <li class="">
            <a href="http://localhost:4000/">Home</a>
          </li>
          <li class="">
            <a href="http://localhost:4000/getting-started">Get Started</a>
          </li>
          <li class="">
            <a href="http://localhost:4000/build-visualization">Build Visualization</a>
          </li>
          <li class="">
            <a href="http://localhost:4000/api">API</a>
          </li>
		<li class="">
            <a href="https://developer.gooddata.com/forum" target="_blank">Forum</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<div class="container-narrow" style="margin-top: 40px;">
  <h2 class="title">Setting Up Custom Visualization</h2>
  <p>It’s time to start building the visualization itself. If you are an expert in building the custom visualization, this article will be super easy for you! We are going to draw the <strong>line chart</strong> using Google Charts library.</p>

<p>If you have the visualization already prepared, you can skip this and continue with <a href="/tutorial/embedding-custom-visualization-into-dashboard">embedding</a>.</p>

<p>We will use <a href="https://google-developers.appspot.com/chart/">Google Charts</a>. You can also use any Javascript framework like <a href="http://d3js.org/">D3.js</a>, find out the <a href="https://github.com/mbostock/d3/wiki">the documentation</a>.</p>

<p><em>You can also check out our <a href="/build-visualization/#examples">end to end examples</a>.</em></p>

<h3 id="what-we-already-know">What we already know</h3>

<p>See the code below to recap how we can log in to the GoodData and extract data from your project.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">google</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="s2">&quot;visualization&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">packages</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;corechart&quot;</span><span class="p">]});</span>

<span class="kd">var</span> <span class="nx">projectId</span> <span class="o">=</span> <span class="s1">&#39;project-id&#39;</span><span class="p">,</span>
	<span class="nx">user</span> <span class="o">=</span> <span class="s1">&#39;username@company.com&#39;</span><span class="p">,</span>
	<span class="nx">passwd</span> <span class="o">=</span> <span class="s1">&#39;password&#39;</span><span class="p">;</span>

<span class="c1">// Report elements identifiers from which we execute a GD report</span>
<span class="kd">var</span> <span class="nx">open</span> <span class="o">=</span> <span class="s1">&#39;aiAY9GSReqiT&#39;</span><span class="p">,</span>
	<span class="nx">close</span> <span class="o">=</span> <span class="s1">&#39;aHZY9nzNeg3f&#39;</span><span class="p">,</span>
	<span class="nx">year</span> <span class="o">=</span> <span class="s1">&#39;date.aag81lMifn6q&#39;</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="p">[</span><span class="nx">year</span><span class="p">,</span> <span class="nx">open</span><span class="p">,</span> <span class="nx">close</span><span class="p">];</span>

<span class="c1">// Insert info label</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;&lt;div class=&quot;login-loader&gt;Logging in...&lt;/div&gt;&#39;</span><span class="p">);</span>

<span class="nx">gooddata</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="nx">passwd</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.login-loader&#39;</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;&lt;div class=&quot;loading&quot; style=&quot;text-align: center; margin: 30px;&quot;&gt;Loading data...&lt;/div&gt;&#39;</span><span class="p">);</span>

    <span class="c1">// Ask for data for the given metric and attributes from the GoodSales project</span>
    <span class="nx">gooddata</span><span class="p">.</span><span class="nx">execution</span><span class="p">.</span><span class="nx">getData</span><span class="p">(</span><span class="nx">projectId</span><span class="p">,</span> <span class="nx">elements</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">dataResult</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Yay, data arrived</span></code></pre></div>

<p>We have a data, let’s build a line chart.</p>

<h3 id="visualization-set-up">Visualization Set Up</h3>

<p><img src="http://localhost:4000/images/posts/google-line-chart.png" width="650" /></p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// extract header values</span>
        <span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="nx">dataResult</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">h</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>
                <span class="p">});</span>

        <span class="c1">// extract raw data matrix</span>
        <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">dataResult</span><span class="p">.</span><span class="nx">rawData</span><span class="p">;</span>

		<span class="c1">// we need to convert metrics to integer because google chart needs numbers</span>
       	<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">]);</span>
			  <span class="p">}</span>
			<span class="p">}</span>
        <span class="c1">// Remove loading labels</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.loading&#39;</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>

        <span class="c1">// call function back to draw the chart after document is ready</span>
        <span class="nx">google</span><span class="p">.</span><span class="nx">setOnLoadCallback</span><span class="p">(</span><span class="nx">drawChart</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">headers</span><span class="p">));</span>

		<span class="c1">// function to draw line chart with our data</span>
		<span class="kd">function</span> <span class="nx">drawChart</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">headers</span><span class="p">)</span> <span class="p">{</span>

            <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">google</span><span class="p">.</span><span class="nx">visualization</span><span class="p">.</span><span class="nx">arrayToDataTable</span><span class="p">(</span><span class="nx">dataResult</span><span class="p">.</span><span class="nx">rawData</span><span class="p">);</span>
            	<span class="kd">var</span> <span class="nx">data3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">visualization</span><span class="p">.</span><span class="nx">DataTable</span><span class="p">();</span>
		    		<span class="nx">data3</span><span class="p">.</span><span class="nx">addColumn</span><span class="p">(</span><span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="nx">headers</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
		    		<span class="nx">data3</span><span class="p">.</span><span class="nx">addColumn</span><span class="p">(</span><span class="s1">&#39;number&#39;</span><span class="p">,</span> <span class="nx">headers</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
		    		<span class="nx">data3</span><span class="p">.</span><span class="nx">addColumn</span><span class="p">(</span><span class="s1">&#39;number&#39;</span><span class="p">,</span> <span class="nx">headers</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
		    		<span class="nx">data3</span><span class="p">.</span><span class="nx">addRows</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
		    		<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

            <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
              <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Nasdaq&#39;</span><span class="p">,</span>
              <span class="nx">hAxis</span><span class="o">:</span> <span class="p">{</span><span class="nx">title</span><span class="o">:</span> <span class="nx">headers</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>  <span class="nx">titleTextStyle</span><span class="o">:</span> <span class="p">{</span><span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;#333&#39;</span><span class="p">}},</span>
              <span class="nx">vAxis</span><span class="o">:</span> <span class="p">{</span><span class="nx">minValue</span><span class="o">:</span> <span class="mi">0</span><span class="p">}</span>
        <span class="p">};</span>

        <span class="kd">var</span> <span class="nx">chart</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">visualization</span><span class="p">.</span><span class="nx">AreaChart</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;chart_div&#39;</span><span class="p">));</span>
        <span class="nx">chart</span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">data3</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
       <span class="p">}</span></code></pre></div>

<h3 id="complete-html">Complete HTML</h3>

<p>The last part is complete html code. See below:</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;https://www.google.com/jsapi&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
	<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;../gooddata.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;chart_div&quot;</span> <span class="na">style=</span><span class="s">&quot;width: 900px; height: 500px;&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;linechart.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></div>

<p>You can find out complete example as a part of the <a href="https://github.com/gooddata/gooddata-js">library you cloned</a> from Github. Try it yourself.</p>


  <div class="section-nav">
  <div class="left align-right">
    
      <a href="http://localhost:4000/build-visualization" class="prev">
        Back
      </a>
    
  </div>
  <div class="right align-left">
    
      <a href="http://localhost:4000/build-visualization/#embed-to-dashboard" class="next">
        Next
      </a>
    
  </div>
  <div class="clear"></div>
</div>

</div>


      <hr>

<div class="footer" style="text-align: center;">
<p>&copy; GoodData 2014</p>
      </div>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
     <script src="https://developer.gooddata.com/themes/site_themes/developer2012/js/jquery.js?v=1"></script>
    <script src="http://localhost:4000/js/bootstrap.min.js"></script>
    <script type="text/javascript">

                     var _gaq = _gaq || [];
                     _gaq.push(['_setAccount', 'UA-3766725-7']);
                     _gaq.push(['_trackPageview']);

                    (function() {
                      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                       })();

    </script>
  </body>
</html>
