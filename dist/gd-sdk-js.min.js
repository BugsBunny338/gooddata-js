(function(t,e,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):e[t]=n()})("sdk",this,function(){var t={reportDefinition:{content:{filters:[],format:"grid",grid:{rows:[],columns:[],sort:{columns:[],rows:[]},columnWidths:[],metrics:[]}},meta:{title:"Test",summary:"",tags:"",deprecated:0,category:"reportDefinition"}}},e=function(e){var n=e.filter(function(t){return"metric"===t.type}),r=e.filter(function(t){return"attribute"===t.type}),i=$.extend(!0,{},t),o=i.reportDefinition.content.grid;return o.metrics=n.map(function(t){return{uri:t.uri,alias:""}}),o.columns=r.map(function(t){return{attribute:{alias:"",totals:[[],[]],uri:t.uri}}}).concat(n.length?["metricGroup"]:[]),i},n=function(){return $.getJSON("/gdc/account/token")},r=function(t,e){var n=$.Deferred();return xhr.post("/gdc/account/login",{data:JSON.stringify({postUserLogin:{login:t,password:e,remember:1,captcha:"",verifyCaptcha:""}})}).then(n.resolve,n.reject),n.promise()},i=function(t,e){var n={execution:{columns:e}},r={isLoaded:!1},i=$.Deferred();return xhr.post("/gdc/internal/projects/"+t+"/experimental/executions",{data:JSON.stringify(n)},i.reject).then(function(t){return r.headers=t.executionResult.columns.map(function(t){return t.attributeDisplayForm?{type:"attrLabel",id:t.attributeDisplayForm.meta.identifier,uri:t.attributeDisplayForm.meta.uri,title:t.attributeDisplayForm.meta.title}:{type:"metric",id:t.metric.meta.identifier,title:t.metric.meta.title,format:t.metric.content.format}}),xhr.ajax(t.executionResult.tabularDataResult)},i.reject).then(function(t){r.rawData=t.tabularDataResult.values,r.isLoaded=!0,i.resolve(r)},i.reject),i.promise()},o=function(t){var e=Em.Object.create({isLoaded:!1,elementItems:void 0});return xhr.post(t.uri+"/validElements?order=asc",{data:JSON.stringify({validElementsRequest:{uris:[]}})}).then(function(t){e.setProperties({isLoaded:!0,elementItems:t.validElements.items})}),e},a=function(){var t=$.Deferred();return xhr.get("/gdc/app/account/bootstrap").then(function(e){var n=e.bootstrapResource.current.project.links.self;t.resolve(n.split("/").pop())},t.reject),t.promise()};return{isLoggedIn:n,login:r,getData:i,getValidElements:o,getReportDefinition:e,getCurrentProjectId:a}}),function(t,e,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):e[t]=n()}("xhr",this,function(){var t,e,n={},r=function(t,e){n.ajax(t).done(function(t,n,r){e.resolve(t,n,r)}).fail(function(t,n,r){e.reject(t,n,r)})},i=function(e,n){t.done(function(){r(e,n)}).fail(function(t,e,r){401!==t.status&&n.reject(t,e,r)})},o=function(e,n){t||(t=$.ajax("/gdc/account/token/").always(function(){t=null}).fail(function(t,r,i){return 401===t.status&&$.isFunction(e.unauthorized)?(e.unauthorized(t),void 0):(n.reject(t,r,i),void 0)})),i(e,n)},a=function(t,e){setTimeout(function(){r(t,e)},t.pollDelay)},u=function(t,e,n){var r=t[e];delete t[e],$.isFunction(r)&&n(r),$.isArray(r)&&r.forEach(function(t){$.isFunction(r)&&n(t)})};n.ajaxSetup=function(t){e=$.extend({contentType:"application/json",dataType:"json",pollDelay:1e3},t)},n.ajax=function(n,r){$.isPlainObject(n)&&(r=n,n=void 0),r=$.extend({},e,r),n&&(r.url=n),$.isPlainObject(r.data)&&(r.data=JSON.stringify(r.data));var c=$.Deferred();return u(r,"success",c.done),u(r,"error",c.fail),u(r,"complete",c.always),t?(i(r,c),c):($.ajax(r).fail(function(t,e,n){401===t.status?o(r,c):c.reject(t,e,n)}).done(function(t,e,n){202===n.status?a(r,c):c.resolve(t,e,n)}),c)};var c=function c(t){return function(e,r){var i=$.extend(!0,{method:t},r);return n.ajax(e,i)}};return n.get=c("GET"),n.post=c("POST"),n.ajaxSetup({}),n});